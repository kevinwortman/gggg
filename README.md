# gggg
Gradescope-Googletest Grading Glue (gggg)

This is a lightweight framework for Gradescope autograding of C++ programming assignments.

## Architecture

A gggg assignment involves several software services working together.

 * Canvas (or another LMS) announces the assignment to students, and stores canonical grades.
 * GitHub Education manages a private repository for each student team. Each repository is initially a copy of a template repository, containing starter code, created by an instructor. Students submit work by pushing to these repositories.
 * Gradescope manages grading, including automated grading (autograding) and optional subjective grading. Gradescope pushes scores to Canvas.
 * GoogleTest may be used for graded code correctness tests.
 * This gggg project is the glue that connects these components.
   - An instructor specifies how a submission is graded by writing a short Python script, conventionally named `grade.py`. A `grade.py` script uses the `gggg.py` library, which defines an API for declaring submission and rubric policies.
   - Sample `Makefile`s have a `make grade` target. Students run `make grade` locally to preview their grade. The Gradescope autograde runs `make grade` to produce a score. 
   - The `make-autograder` program creates an `autograder.zip` demanded by Gradescope. An `autograder.zip` contains some very short scripts that tell Gradescope how to run `make grade` and find the score generated by `grade.py`.

## Workflow

This section explains what happens in an assignment, in chronological order.

Each term, to set up a class:
1. Instructor follows the [GitHub Education quickstart instructions](https://docs.github.com/en/education/quickstart) to create an organization for the course, and establish/renew an educator discount.
2. Instructor [creates a classroom object in GitHub Education](https://classroom.github.com/classrooms).
3. Instructor adds the GradeScope App to the class Canvas space.
4. Students create GitHub accounts. It is a best practice to assign this as an out-of-class homework assignment. GitHub has a DDoS mitigation that is triggered by a lab's worth of students all creating accounts at the same moment from similar IP addresses.

For each assignment:
1. Instructor creates a **template repository** inside the GitHub Organization, to hold starter code distributed to students.
   1. In the GitHub web view: create a private repository; suggest no to README; MIT license; and C++ .gitignore.
   2. In Settings: turn on `Template repository`.
   3. Clone the repo to a local machine. Copy files from the `ggg/template-skeleton` directory: `Makefile`, `README.md`, `gggg.py`, `grade.py`, and (if relevant) `timer.hpp`.
2. Instructor creates a C++ **solution**, unit tests, Makefile, and `grade.py` script (see the `template-example` directory for a working example). Confirm that `make grade` works and shows a perfect score. Never commit the solution, because students could view it in the git history.
3. Instructor **archives the solution**. Suggestion: `tar` the repo on the commandline.
4. Instructor modifies the `.hpp` and `.cpp` files to become **starter code**; confirms that `make grade` works and shows an imperfect score; and commits, pushes the starter code.
6. Instructor **archives the starter code** for long term storage. Suggestion: web view > Code > Download ZIP.
7. Instructor creates a **GitHub Education assignment object**: [classroom.github.com](https://classroom.github.com) > New Assignment > Create Group Assignment (or individual assignment, as the case may be). Suggested settings:
   1. Title: "Project 2", "Lab 3", or similar.
   2. Deadline: blank (Gradescope enforces deadlines)
   3. Individual or Group: self-explanatory
   4. (Group assignment) Name your set of teams: "Project 2 Groups" or similar
   5. (Group assignment) Maximum members per team: 3 (or whatever your class policy is)
   6. Repository visibility: Private (otherwise plagiarism is extremely easy and tempting)
   7. Grant students admin access to their repository: no (these privileges allow students to irreparably break their repos)
   8. Your assignment repository prefix: automatically populates to "project-2" or similar
   9. Add a template repository to give students starter code: Find and use the template repo you created above.
   10. Allow students to use an online IDE: no (default)
   11. (Continue)
   12. Add autograding tests: no (we use Gradescope instead)
   13. Enable feedback pull requests: no (default)
   14. (Create Assignment)
8. Instructor creates a **Canvas assignment object**. This will only store the grades and make the deadline visible to students in Canvas. (If you do not use Canvas, create an assignment in your LMS of choice.)
   1. Decide whether your assignment will be graded solely on the basis of automated `grade.py` scores, or will also include manual subjective scores.
   2. Calculate your maximum score = (max `grade.py` points) + (max manual points)
   3. Canvas > Create Assignment
   4. Points: maximum score calculated above
   5. Submission type: External Tool > Gradescope. Load This Tool In A New Tab: yes 
   6. Allowed Attempts: Limited to 1 (unclear if this is honored)
   7. Assign to: everyone, with your stated deadline. (This deadline will be communicated to students in their calendar view. Gradescope will enforce the deadline.)

